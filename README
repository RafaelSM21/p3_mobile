Claro â€” aqui estÃ¡ um **README completo, organizado, profissional e pronto para entregar na FATEC**.
Se quiser, posso gerar tambÃ©m **versÃ£o em PDF**, **markdown com imagens**, ou **versÃ£o curta para GitHub**.

---

# ğŸ“ **README â€“ API Kanban + AutenticaÃ§Ã£o (LDDM + PDM2)**

## ğŸ“Œ **DescriÃ§Ã£o do Projeto**

Este projeto consiste no desenvolvimento de uma **API REST completa**, construÃ­da para atender os requisitos das disciplinas **LDDM** e **PDM2**.
Ela inclui autenticaÃ§Ã£o, autorizaÃ§Ã£o, CRUD de usuÃ¡rios, implementaÃ§Ã£o de estratÃ©gias de login, integraÃ§Ã£o com banco de dados usando Prisma, testes automatizados com Jest, e um pequeno front-end para testes.

---

# ğŸ—ï¸ **Tecnologias Utilizadas**

* **Node.js + Express**
* **TypeScript**
* **Prisma ORM**
* **SQLite** (pode trocar por MySQL/PostgreSQL)
* **JWT (jsonwebtoken 8.5.1)**
* **bcryptjs**
* **Jest + Supertest**
* **CORS**
* **Strategy Pattern**
* **Front-end HTML/CSS responsivo para testes**

---

# ğŸ“ **Estrutura do Projeto**

```
src/
 â”œâ”€â”€ app.ts
 â”œâ”€â”€ db.ts
 â”œâ”€â”€ middlewares/
 â”‚    â””â”€â”€ auth.ts
 â”œâ”€â”€ routes/
 â”‚    â””â”€â”€ auth.ts
 â”‚    â””â”€â”€ users.ts
 â”œâ”€â”€ services/
 â”‚    â””â”€â”€ auth.service.ts
 â”‚    â””â”€â”€ user.service.ts
 â”œâ”€â”€ strategies/
 â”‚    â””â”€â”€ auth/
 â”‚         â”œâ”€â”€ AuthStrategy.ts
 â”‚         â”œâ”€â”€ EmailPasswordStrategy.ts
 â”‚         â”œâ”€â”€ MasterKeyStrategy.ts
public/
 â””â”€â”€ index.html (frontend de teste)
__tests__/
 â””â”€â”€ auth.test.ts
```

---

# âš™ï¸ **InstalaÃ§Ã£o e ConfiguraÃ§Ã£o**

## 1ï¸âƒ£ Instalar dependÃªncias

```bash
npm install
```

## 2ï¸âƒ£ Arquivo `.env`

Crie um `.env` na raiz:

```
JWT_SECRET=dev_secret
JWT_EXPIRES_IN=8h
MASTER_KEY=FATEC123
DATABASE_URL="file:./dev.db"
```

## 3ï¸âƒ£ Ajuste IMPORTANTE: jsonwebtoken

Este projeto usa **jsonwebtoken 8.5.1** (nÃ£o 9.x), pois a versÃ£o nova quebra TypeScript e Jest.

InstalaÃ§Ã£o correta:

```bash
npm uninstall jsonwebtoken
npm install jsonwebtoken@8.5.1
npm install --save-dev @types/jsonwebtoken
```

---

# ğŸ—„ï¸ **Banco de Dados**

### Criar BD + gerar Prisma Client:

```bash
npx prisma migrate dev --name init
```

### Visualizar BD:

```bash
npx prisma studio
```

---

# ğŸ” **AutenticaÃ§Ã£o e AutorizaÃ§Ã£o**

A API usa **JWT**.
Ao logar, o usuÃ¡rio recebe:

```json
{
  "token": "...",
  "user": {
    "id": 1,
    "name": "Rafael",
    "email": "rafael@teste.com",
    "role": "USER"
  }
}
```

### Middleware de autenticaÃ§Ã£o

`ensureAuth` protege rotas e injeta `req.user`.

### PermissÃµes

* **UsuÃ¡rios comuns (`USER`)** â†’ podem listar usuÃ¡rios.
* **Admin (`ADMIN`)** â†’ podem deletar usuÃ¡rios.

---

# ğŸ§  **Strategy Pattern no Login**

O login funciona com duas estratÃ©gias:

### 1. Email + Senha (padrÃ£o)

```ts
new EmailPasswordStrategy()
```

### 2. Master Key (login direto como ADMIN)

```ts
new MasterKeyStrategy()
```

Para ativar no front:

```
Usar modo master (master key)
```

---

# ğŸ“Œ **Rotas da API**

## ğŸ”‘ **AutenticaÃ§Ã£o**

### **POST /auth/register**

Body:

```json
{
  "name": "Rafael",
  "email": "rafael@teste.com",
  "password": "123456",
  "role": "ADMIN"
}
```

### **POST /auth/login**

```json
{
  "email": "rafael@teste.com",
  "password": "123456"
}
```

### **POST /auth/login (Master Mode)**

```json
{
  "email": "admin",
  "password": "MASTER_KEY",
  "mode": "master"
}
```

---

## ğŸ‘¤ **Users**

### **GET /users**

Requer Bearer Token.

### **GET /users/:id**

### **DELETE /users/:id**

Somente `ADMIN`.

---

# ğŸ§ª **Testes Automatizados (Jest)**

Os testes ficam na pasta:

```
__tests__/auth.test.ts
```

Para rodar:

```bash
npm test
```

Este teste valida:

* registro
* login
* token vÃ¡lido
* acesso protegido
* erros esperados

---

# ğŸ–¥ï¸ **Frontend de Teste (responsivo)**

Dentro de `/public/index.html` hÃ¡ um painel completo com:

* Registrar usuÃ¡rio
* Login normal
* Login com master key
* Mostrar token
* Listar usuÃ¡rios
* Deletar usuÃ¡rio (se for admin)

### Rodar o projeto:

```bash
npm run dev
```

Acesse:

```
http://localhost:3000
```

O front Ã© **totalmente responsivo**, com CSS simples e interface intuitiva.

---

# ğŸ§¹ **Scripts DisponÃ­veis**

```bash
npm run dev     # iniciar API com hot reload
npm start       # rodar versÃ£o compilada
npm test        # rodar Jest
```

---

# ğŸ¯ **Checklist de Requisitos (LDDM + PDM2)**

| Item                          | Status                           |
| ----------------------------- | -------------------------------- |
| ImplementaÃ§Ã£o de API          | âœ”ï¸ Feito                         |
| Endpoints bÃ¡sicos             | âœ”ï¸ Feito                         |
| Responsividade da interface   | âœ”ï¸ Feito                         |
| AutenticaÃ§Ã£o de usuÃ¡rio (JWT) | âœ”ï¸ Feito                         |
| Banco de dados (Prisma)       | âœ”ï¸ Feito                         |
| CRUD de usuÃ¡rios              | âœ”ï¸ Feito                         |
| PermissÃµes (USER/ADMIN)       | âœ”ï¸ Feito                         |
| Simulador de Kanban           | ğŸ”œ *prÃ³ximo passo se quiser*     |
| TDD                           | âœ”ï¸ Feito com Jest                |
| Design patterns               | âœ”ï¸ Strategy Pattern implementado |

---

# ğŸ“ **Suporte / Ajuda**

Se quiser, posso:

* Criar o **Kanban completo** usando a mesma API
* Criar mais testes TDD
* Melhorar o front com React ou Tailwind
* Gerar documentaÃ§Ã£o em PDF
* Criar swagger da API

SÃ³ pedir!
